<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: 'unsafe-inline' 'unsafe-eval'; script-src 'self' https: 'unsafe-inline' 'unsafe-eval'; connect-src 'self' https:; frame-src 'self' https: accounts.google.com;">
    <title>FitFrog</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <nav>
            <div class="logo">FitFrog</div>
            <div class="nav-buttons">
                <button id="homeBtn" class="nav-btn">
                    <span class="icon">🏠</span>
                    <span class="text">Home</span>
                </button>
            </div>
        </nav>
    </header>

    <main>
        <div id="welcomeContent" class="welcome-content">
            <h1>Welcome to FitFrog</h1>
            <p>Your personal fitness journey starts here!</p>
        </div>

        <div id="actionGrid" class="action-grid">
            <button id="dashboardBtn" class="action-btn">
                <span class="icon">📊</span>
                <span class="text">View Dashboard</span>
            </button>
            <button id="goalsBtn" class="action-btn">
                <span class="icon">🎯</span>
                <span class="text">Set Goals</span>
            </button>
            <button id="workoutBtn" class="action-btn">
                <span class="icon">💪</span>
                <span class="text">Start Workout</span>
            </button>
            <button id="leaderboardBtn" class="action-btn">
                <span class="icon">🏆</span>
                <span class="text">Leaderboard</span>
            </button>
        </div>
    </main>

    <!-- Dashboard Modal -->
    <div id="dashboardModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Your Fitness Profile</h2>
            <div id="userData"></div>
        </div>
    </div>

    <!-- Goals Modal -->
    <div id="goalsModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Set Your Fitness Goals</h2>
            <div class="goals-form">
                <div class="form-group">
                    <label>Goal Type:</label>
                    <select id="goalType">
                        <option value="weight">Weight Management</option>
                        <option value="strength">Strength Building</option>
                        <option value="endurance">Endurance Training</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Target Weight (kg):</label>
                    <input type="range" id="weightSlider" min="40" max="150" value="70">
                    <span id="weightValue">70 kg</span>
                </div>
                <div class="form-group">
                    <label>Weekly Workouts:</label>
                    <input type="range" id="workoutsSlider" min="1" max="7" value="3">
                    <span id="workoutsValue">3 days</span>
                </div>
                <button id="saveGoals" class="submit-btn">Save Goals</button>
            </div>
        </div>
    </div>

    <script>
        // Check if user has completed questionnaire
        document.addEventListener('DOMContentLoaded', () => {
            const userData = JSON.parse(localStorage.getItem('fitfrogData'));
            console.log('User data:', userData); // Debug log
            
            // Only redirect to questionnaire if no user data exists
            if (!userData || !userData.age || !userData.gender || !userData.height || !userData.weight) {
                console.log('Redirecting to questionnaire...'); // Debug log
                window.location.replace('questionnaire.html');
                return;
            }

            // Initialize modals
            const dashboardModal = document.getElementById('dashboardModal');
            const goalsModal = document.getElementById('goalsModal');
            const dashboardBtn = document.getElementById('dashboardBtn');
            const goalsBtn = document.getElementById('goalsBtn');
            const workoutBtn = document.getElementById('workoutBtn');
            const leaderboardBtn = document.getElementById('leaderboardBtn');
            const homeBtn = document.getElementById('homeBtn');

            // Close buttons
            document.querySelectorAll('.close').forEach(btn => {
                btn.addEventListener('click', () => {
                    dashboardModal.style.display = 'none';
                    goalsModal.style.display = 'none';
                });
            });

            // Dashboard button
            dashboardBtn.addEventListener('click', () => {
                const userData = JSON.parse(localStorage.getItem('fitfrogData'));
                if (userData) {
                    const bmi = (userData.weight / Math.pow(userData.height / 100, 2)).toFixed(1);
                    const bmiCategory = bmi < 18.5 ? 'Underweight' : 
                                      bmi < 25 ? 'Normal weight' : 
                                      bmi < 30 ? 'Overweight' : 'Obese';
                    
                    document.getElementById('userData').innerHTML = `
                        <div class="data-group">
                            <h3>Personal Information</h3>
                            <p>Age Group: ${userData.age}</p>
                            <p>Gender: ${userData.gender}</p>
                            <p>Height: ${userData.height} cm</p>
                            <p>Weight: ${userData.weight} kg</p>
                        </div>
                        <div class="data-group">
                            <h3>BMI Analysis</h3>
                            <p>Your BMI: ${bmi}</p>
                            <p>Category: ${bmiCategory}</p>
                        </div>
                    `;
                    dashboardModal.style.display = 'block';
                }
            });

            // Goals button
            goalsBtn.addEventListener('click', () => {
                const savedGoals = JSON.parse(localStorage.getItem('fitfrogGoals'));
                if (savedGoals) {
                    document.getElementById('goalType').value = savedGoals.type;
                    document.getElementById('weightSlider').value = savedGoals.targetWeight;
                    document.getElementById('weightValue').textContent = `${savedGoals.targetWeight} kg`;
                    document.getElementById('workoutsSlider').value = savedGoals.weeklyWorkouts;
                    document.getElementById('workoutsValue').textContent = `${savedGoals.weeklyWorkouts} days`;
                }
                goalsModal.style.display = 'block';
            });

            // Save goals
            document.getElementById('saveGoals').addEventListener('click', () => {
                const goals = {
                    type: document.getElementById('goalType').value,
                    targetWeight: parseInt(document.getElementById('weightSlider').value),
                    weeklyWorkouts: parseInt(document.getElementById('workoutsSlider').value)
                };
                localStorage.setItem('fitfrogGoals', JSON.stringify(goals));
                goalsModal.style.display = 'none';
                alert('Goals saved successfully!');
            });

            // Update sliders
            document.getElementById('weightSlider').addEventListener('input', (e) => {
                document.getElementById('weightValue').textContent = `${e.target.value} kg`;
            });

            document.getElementById('workoutsSlider').addEventListener('input', (e) => {
                document.getElementById('workoutsValue').textContent = `${e.target.value} days`;
            });

            // Workout button
            workoutBtn.addEventListener('click', () => {
                alert('Workout feature coming soon!');
            });

            // Leaderboard button
            leaderboardBtn.addEventListener('click', () => {
                alert('Leaderboard feature coming soon!');
            });

            // Home button
            homeBtn.addEventListener('click', () => {
                window.location.reload();
            });
        });
    </script>
</body>
</html> 